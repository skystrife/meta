<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ModErn Text Analysis: meta::index::ir_eval Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ModErn Text Analysis
   </div>
   <div id="projectbrief">META Enumerates Textual Applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemeta.html">meta</a></li><li class="navelem"><a class="el" href="namespacemeta_1_1index.html">index</a></li><li class="navelem"><a class="el" href="classmeta_1_1index_1_1ir__eval.html">ir_eval</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classmeta_1_1index_1_1ir__eval-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">meta::index::ir_eval Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Evaluates lists of ranked documents returned from a search engine; can give stats per-query (e.g.  
 <a href="classmeta_1_1index_1_1ir__eval.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ir__eval_8h_source.html">ir_eval.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval_1_1ir__eval__exception.html">ir_eval_exception</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Basic exception for <a class="el" href="classmeta_1_1index_1_1ir__eval.html" title="Evaluates lists of ranked documents returned from a search engine; can give stats per-query (e...">ir_eval</a> interactions.  <a href="classmeta_1_1index_1_1ir__eval_1_1ir__eval__exception.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a6ad4b5fc69593b1c5f15760e39296414"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ad4b5fc69593b1c5f15760e39296414"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>result_type</b> = std::vector&lt; std::pair&lt; doc_id, double &gt;&gt;</td></tr>
<tr class="separator:a6ad4b5fc69593b1c5f15760e39296414"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aacecef1b4f2ac751b011ee6084450b00"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#aacecef1b4f2ac751b011ee6084450b00">ir_eval</a> (const std::string &amp;config_file)</td></tr>
<tr class="separator:aacecef1b4f2ac751b011ee6084450b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6897207b0b1c532d9283792be01d231c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a6897207b0b1c532d9283792be01d231c">precision</a> (const result_type &amp;results, query_id q_id, uint64_t num_docs=std::numeric_limits&lt; uint64_t &gt;::max()) const </td></tr>
<tr class="separator:a6897207b0b1c532d9283792be01d231c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c1c6fed2198319601fd195a17d256fd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a3c1c6fed2198319601fd195a17d256fd">recall</a> (const result_type &amp;results, query_id q_id, uint64_t num_docs=std::numeric_limits&lt; uint64_t &gt;::max()) const </td></tr>
<tr class="separator:a3c1c6fed2198319601fd195a17d256fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e358be574c6a3b2800a7d6796f7a664"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a7e358be574c6a3b2800a7d6796f7a664">f1</a> (const result_type &amp;results, query_id q_id, uint64_t num_docs=std::numeric_limits&lt; uint64_t &gt;::max(), double beta=1.0) const </td></tr>
<tr class="separator:a7e358be574c6a3b2800a7d6796f7a664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18df529f0065d9becb22bf210e4f8fc2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a18df529f0065d9becb22bf210e4f8fc2">ndcg</a> (const result_type &amp;results, query_id q_id, uint64_t num_docs=std::numeric_limits&lt; uint64_t &gt;::max()) const </td></tr>
<tr class="separator:a18df529f0065d9becb22bf210e4f8fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a1161670c6e1e5de15dbdeea5fa2f3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37a1161670c6e1e5de15dbdeea5fa2f3"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a37a1161670c6e1e5de15dbdeea5fa2f3">avg_p</a> (const result_type &amp;results, query_id q_id, uint64_t num_docs=std::numeric_limits&lt; uint64_t &gt;::max())</td></tr>
<tr class="memdesc:a37a1161670c6e1e5de15dbdeea5fa2f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the average precision for a query. <br /></td></tr>
<tr class="separator:a37a1161670c6e1e5de15dbdeea5fa2f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9226745411a4786a589821884e2e6607"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a9226745411a4786a589821884e2e6607">map</a> () const </td></tr>
<tr class="separator:a9226745411a4786a589821884e2e6607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f73ee30ca38d629bb321af27956bbf4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a9f73ee30ca38d629bb321af27956bbf4">gmap</a> () const </td></tr>
<tr class="separator:a9f73ee30ca38d629bb321af27956bbf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9544f1e2ab5788a6473fff866e8a58e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a9544f1e2ab5788a6473fff866e8a58e4">print_stats</a> (const result_type &amp;results, query_id q_id, std::ostream &amp;out=std::cout)</td></tr>
<tr class="separator:a9544f1e2ab5788a6473fff866e8a58e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad307357f47116026fe750ec6b71f46bb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad307357f47116026fe750ec6b71f46bb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#ad307357f47116026fe750ec6b71f46bb">reset_stats</a> ()</td></tr>
<tr class="memdesc:ad307357f47116026fe750ec6b71f46bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears saved scores for MAP and gMAP. <br /></td></tr>
<tr class="separator:ad307357f47116026fe750ec6b71f46bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a5f2fdc87dbe7f7e18392e82ccd689c55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a5f2fdc87dbe7f7e18392e82ccd689c55">init_index</a> (const std::string &amp;path)</td></tr>
<tr class="separator:a5f2fdc87dbe7f7e18392e82ccd689c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bd99f7bff2f5ac71a190856c5ed5782"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a7bd99f7bff2f5ac71a190856c5ed5782">relevant_retrieved</a> (const result_type &amp;results, query_id q_id, uint64_t num_docs) const </td></tr>
<tr class="separator:a7bd99f7bff2f5ac71a190856c5ed5782"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a20fb8fb601b4bf3c9c128519e5d01887"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20fb8fb601b4bf3c9c128519e5d01887"></a>
std::unordered_map&lt; query_id, std::unordered_map&lt; doc_id, uint8_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#a20fb8fb601b4bf3c9c128519e5d01887">qrels_</a></td></tr>
<tr class="memdesc:a20fb8fb601b4bf3c9c128519e5d01887"><td class="mdescLeft">&#160;</td><td class="mdescRight">query_id -&gt; (doc_id -&gt; relevance) mapping If the doc_id isn't in the map, it is non-relevant. <br /></td></tr>
<tr class="separator:a20fb8fb601b4bf3c9c128519e5d01887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc25d516259dca82e10ebad24adc1e82"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adc25d516259dca82e10ebad24adc1e82"></a>
std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmeta_1_1index_1_1ir__eval.html#adc25d516259dca82e10ebad24adc1e82">scores_</a></td></tr>
<tr class="memdesc:adc25d516259dca82e10ebad24adc1e82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collection of scores used to calculate MAP and gMAP. <br /></td></tr>
<tr class="separator:adc25d516259dca82e10ebad24adc1e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Evaluates lists of ranked documents returned from a search engine; can give stats per-query (e.g. </p>
<p>precision) or over a series of queries (e.g. MAP). </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aacecef1b4f2ac751b011ee6084450b00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">meta::index::ir_eval::ir_eval </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>config_file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config_file</td><td>Path to cpptoml configuration file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6897207b0b1c532d9283792be01d231c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double meta::index::ir_eval::precision </td>
          <td>(</td>
          <td class="paramtype">const result_type &amp;&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">query_id&#160;</td>
          <td class="paramname"><em>q_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>num_docs</em> = <code>std::numeric_limits&lt;uint64_t&gt;::max()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">results</td><td>The ranked list of results </td></tr>
    <tr><td class="paramname">q_id</td><td>The query that was run to produce these results </td></tr>
    <tr><td class="paramname">num_docs</td><td>For p </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the precision: \( \frac{\# relevant~retrieved~docs}{\# retrieved~docs} \) </dd></dl>

</div>
</div>
<a class="anchor" id="a3c1c6fed2198319601fd195a17d256fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double meta::index::ir_eval::recall </td>
          <td>(</td>
          <td class="paramtype">const result_type &amp;&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">query_id&#160;</td>
          <td class="paramname"><em>q_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>num_docs</em> = <code>std::numeric_limits&lt;uint64_t&gt;::max()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">results</td><td>The ranked list of results </td></tr>
    <tr><td class="paramname">q_id</td><td>The query that was run to produce these results </td></tr>
    <tr><td class="paramname">num_docs</td><td>For r </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the recall: \( \frac{\# relevant~retrieved~docs}{\# relevant~docs} \) </dd></dl>

</div>
</div>
<a class="anchor" id="a7e358be574c6a3b2800a7d6796f7a664"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double meta::index::ir_eval::f1 </td>
          <td>(</td>
          <td class="paramtype">const result_type &amp;&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">query_id&#160;</td>
          <td class="paramname"><em>q_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>num_docs</em> = <code>std::numeric_limits&lt;uint64_t&gt;::max()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>beta</em> = <code>1.0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">results</td><td>The ranked list of results </td></tr>
    <tr><td class="paramname">q_id</td><td>The query that was run to produce these results </td></tr>
    <tr><td class="paramname">num_docs</td><td>For f1 </td></tr>
    <tr><td class="paramname">beta</td><td>Attach beta times as much importance to recall compared to precision (default 1.0, or equal) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the F1 score: \( \frac{(1+\beta^2)(P\cdot R)}{(\beta^2\cdot P )+R} \) </dd></dl>

</div>
</div>
<a class="anchor" id="a18df529f0065d9becb22bf210e4f8fc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double meta::index::ir_eval::ndcg </td>
          <td>(</td>
          <td class="paramtype">const result_type &amp;&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">query_id&#160;</td>
          <td class="paramname"><em>q_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>num_docs</em> = <code>std::numeric_limits&lt;uint64_t&gt;::max()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the Normalized Discounted Cumulative Gain for a query. \( DCG_p = \sum_{i=1}^p \frac{2^{rel_i}-1}{\log(i+1)}, p = num\_docs \) and \( nDCG_p = \frac{DCG_p}{IDCG_p} \), where IDCG is the optimal DCG score for a given query. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">results</td><td>The ranked list of results </td></tr>
    <tr><td class="paramname">q_id</td><td>The query that was run to produce these results </td></tr>
    <tr><td class="paramname">num_docs</td><td>For f1 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9226745411a4786a589821884e2e6607"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double meta::index::ir_eval::map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the Mean Average Precision for a set of queries. Note that <a class="el" href="classmeta_1_1index_1_1ir__eval.html#a37a1161670c6e1e5de15dbdeea5fa2f3" title="Computes the average precision for a query. ">avg_p()</a> must be called in order for the individual query scores to be calculated and saved. \( MAP = \frac{1}{n}\sum_{i=1}^n avg\_p(i)\) </dd></dl>

</div>
</div>
<a class="anchor" id="a9f73ee30ca38d629bb321af27956bbf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double meta::index::ir_eval::gmap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the Geometric Mean Average Precision for a set of queries. Note that <a class="el" href="classmeta_1_1index_1_1ir__eval.html#a37a1161670c6e1e5de15dbdeea5fa2f3" title="Computes the average precision for a query. ">avg_p()</a> must be called in order for the individual query scores to be calculated and saved. Also note that the product is computed in log space to minimize any floating point errors. \( gMAP = \frac{1}{n}\sum_{i=1}^n \log avg\_p(i + 1)\) </dd></dl>

</div>
</div>
<a class="anchor" id="a9544f1e2ab5788a6473fff866e8a58e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void meta::index::ir_eval::print_stats </td>
          <td>(</td>
          <td class="paramtype">const result_type &amp;&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">query_id&#160;</td>
          <td class="paramname"><em>q_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>out</em> = <code>std::cout</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">results</td><td>The ranked list of results </td></tr>
    <tr><td class="paramname">q_id</td><td>The query that was run to produce these results </td></tr>
    <tr><td class="paramname">out</td><td>The stream to print to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5f2fdc87dbe7f7e18392e82ccd689c55"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void meta::index::ir_eval::init_index </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path to the relevance judgements </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7bd99f7bff2f5ac71a190856c5ed5782"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double meta::index::ir_eval::relevant_retrieved </td>
          <td>(</td>
          <td class="paramtype">const result_type &amp;&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">query_id&#160;</td>
          <td class="paramname"><em>q_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>num_docs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">results</td><td>The ranked list of results </td></tr>
    <tr><td class="paramname">q_id</td><td>The query that was run to produce these results </td></tr>
    <tr><td class="paramname">num_docs</td><td>For  scores </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of relevant results that were retrieved </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/chase/projects/meta/include/index/eval/<a class="el" href="ir__eval_8h_source.html">ir_eval.h</a></li>
<li>/home/chase/projects/meta/src/index/eval/<a class="el" href="ir__eval_8cpp.html">ir_eval.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 2 2015 22:20:47 for ModErn Text Analysis by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
